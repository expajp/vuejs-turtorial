# Vueインスタンス

## Vueインスタンスの作成
* すべてのVueアプリケーションはVue関数を使って新しいVueインスタンスを作ることで開始される
* VueのデザインはMVVMパターンに影響を受けているため、vm:ViewModelをVueの変数名としてよく使う
* Vueインスタンス生成にはオプションオブジェクトを渡す
* Vueアプリケーションはnew Vueで作成されたルートVueインスタンスで構成される
    * 必要に応じてネストされたツリーや再利用可能なコンポーネントで形成される

## データとメソッド
* Vueインスタンスが作成されると、dataオブジェクトのすべてのプロパティをリアクティブシステムに追加する
    * リアクティブシステムに追加したプロパティの値を変更すると、ビューが一致するように反応する
* 途中で追加されたプロパティは反応しない、**作成時のみに依存**する
    * つまり、空でも良いから必要なプロパティには初期値を設定しておく
    * 逆に、既存プロパティの変更を防ぎたい場合は``Object.freeze()``を使う
* dataプロパティの他にVueオブジェクトは便利なプロパティとメソッドを持っている
    * **組込プロパティの先頭には\$がついている**
    * リストはAPIリファレンスを参照

## インスタンスライフサイクルフック
* 各Vueインスタンスは生成時に初期化が行われる
* 例えば
    * データ監視のセットアップ
    * テンプレートのコンパイル
    * DOMへのインスタンスのマウント
    * データが変化したときのDOMの更新
* 初期化の特定の段階でユーザ自身のコードを追加するフックが走る
    * これを**ライフサイクルフック**という
    * 要はコールバック
* 生成直後に実行されるのはcreated
    * ほか、mounted, updated, destroyed
* ライフサイクルフックでは、**thisがVueインスタンス自身を指す**

## ライフサイクルダイヤグラム
* new Vue()する
* イベントとライフサイクルを初期化する
    * ここでbeforeCreate
* インジェクションとリアクティビティ（？）を初期化する
    * ここでcreate
* elとtemplateのオプションをチェック
* テンプレートやDOM外のHTMLを描画
    * ここでbeforeMount
* マウントする
    * これでデータ更新がリアルタイムにDOMに反映される
    * アップデートする際は前後にbeforeUpdateとupdatedが走る
* `vm.$destroy()`がコールされる
    * beforeDestroyが走る
* ウォッチャ、子コンポーネント、イベントリスナが削除される
* 削除される
    * destroyedが走る
* あーそういうことね完全に理解した

