# イベントハンドリング

## イベントの購読
* v-onディレクティブを使うことで以下が可能になる
    * イベントの購読
    * イベント発火時のJSの実行
        * JSをベタ書きできる

## メソッドイベントハンドラ
* JSベタ書きはもちろんイレギュラー
* メソッド名も受け付けてくれる

## インラインメソッドハンドラ
* インラインJS式でメソッドの指定が可能
* `$event`を第2引数で指定することで、イベントオブジェクトを渡せる

## イベント修飾子
* イベントハンドラ内で、以下の呼び出しは様々な場面で必要になる
    * event.preventDefault()
    * event.stopPropagation()
* メソッド内部でDOMの処理を行うより、データロジックである方がよい
    * DOMの状態に依存せずに処理ができる
* これに対応するため、v-onに「イベント修飾子」が用意されている
* イベント修飾子は以下の通り
    * .stop
        * クリックイベントの伝搬が止まる
    * .prevent
        * 特定の組み込みイベント発火を防ぐ
    * .capture
        * 内部要素を処理するイベントを親要素で処理する
    * .self
        * event.targetが自分自身のときのみ発火
        * 子要素では発火しない
    * .once
        * 2.1.4から
        * トリガされるのは高々1回
    * .passive
        * 2.3.0から
        * イベントのデフォルトの挙動はpreventDefaultされても発生する
        * preventと同時使用するとpreventが無視されるため、控えること

## キー修飾子
* キーボードイベントを取得するにあたって、キーコードが必要になる場合がある
    * ていうか、電卓でやったぞこれは
* これに対してエイリアスが設定されている
    * deleteでbackspaceとdeleteの両方を拾う
* グローバルなconfig.keuCodesで定義されているため、これをオーバーライドすれば拡張可能

### 自動キー修飾子
* [Key Values \- Web APIs \| MDN](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values)
    * ここでのキー名をケバブケースに変換すると修飾子として使える
* IE9は死ね

## システム修飾子キー
* Ctrl, Alt, Shift, Metaの修飾子を挟むことで、**同時押しのみでのトリガ**を表現できる
* さらにexactをつけることで、**他のキーが押されてちゃ駄目**
* マウスボタンの修飾子もあり、click等のイベントで押されるボタンを制限する
    * 逆に言えば、**clickイベントだけだと右クリックでも発火**ということ

## なぜHTMLにリスナを記述するか
* **ViewModelをDOMに非依存にするため**
    * これでテスタビリティが向上
* HTMLテンプレートからハンドラ関数を探すのが簡単になる
* ViewModel消去時にリスナごと消せる
