# テンプレート構文

* Vueインスタンスのデータと描画されたDOMは宣言的に対応させることが可能
    * 「宣言的に」は「暗黙的に」の対義語
* VueのテンプレートはHTMLベース
    * なので、ブラウザのHTMLパーサで構文解析可能
* JSXも一応サポートしている

## 展開
### テキスト
* データバインディングの最も基本的な形
* 中括弧2つ：``{{ message }}``
    * mustache構文というらしい
    * mustache: 口ひげ
* 対応するオブジェクトの対応するプロパティの値に置き換えられる
* v-onceディレクティブで**リアルタイム更新を無効化**できる
    * freezeのようなもの
* **プレーンテキストとして扱われる**ため、タグを打ち込んでも無効

### 生HTML
* HTMLとして出力するにはv-htmlディレクティブが必要
* このディレクティブで指定されたコンポーネントのプロパティをHTMLとして描画する
* あくまで生HTMLで、**コンポーネントの組み合わせとしては記述できない**
* XSSの温床になるので仕様には細心の注意を
    * 普通にscriptタグを挿入可能

### 属性
* mustacheはHTML属性の内部（ID名とか）には使用できない
    * 代わりにv-bindディレクティブを使用する
* HTMLを生成するときに厄介な「存在しているだけで真偽値を表す」属性（checked, disabledなど）は違う動きをする
    * すなわち、**falsyな値が指定されたときは、属性自体が付与されない**という動きをする
    * falsyな値: null, undefined, false
    * **0はtrueとみなされる**

### JavaScript式の使用
* データバインディング内部でJSの**式**をサポートする
* 文ではなく、式
    * 式は値を生成するワンライナーを指す
    * Rubyではすべてが式なのでどんな文も戻り値を持つが、JSはそうではない

## ディレクティブ
* v-から始まる特別なHTML属性
* **単一のJS式**を値として期待する
    * v-forは例外
* 属性値の式の値が変化したときに、リアクティブに副作用をDOMに施すのが仕事
    * 例えば`v-if="seen"`とすると、seenの値が切り替わったときに表示するかどうかを決める

### 引数
* ディレクティブの中には引数を取るものがある
* 例えば、v-bindディレクティブは**式を適用する属性名**が引数になる
    * `<a v-bind:href="url">飛ぶ先を変えられるリンク</a>`みたいな
* 例えば、v-onディレクティブはDOMイベントを受け取る
    * `<a v-on:click="doSomething">クリックされるとdoSomethingするリンク</a>`みたいな

### 修飾子
* ディレクティブにつく特別な設備語
    * ドットから始まる
* 例えば、`v-on:{event}.prevent`でデフォルトの挙動を封じる
* v-onやv-modelに定義されているので調べてください

## 省略記法
* v-bindとv-onには特別な省略記法が用意されている
* 実は、**セミコロンもアットマークも、HTMLの仕様で属性名に使えることになっている**

### v-bind
* **v-bindを丸ごと省略**してセミコロンから始まる
* 例）``<a :href="url">飛ぶ先を変えられるリンク</a>``

### v-on
* セミコロンまでが**@になる**
* 例）`<a @click="doSomething">クリックされるとdoSomethingするリンク</a>`
